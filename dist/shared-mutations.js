"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _electron=require("electron"),IPC_EVENT_CONNECT="vuex-mutations-connect",IPC_EVENT_NOTIFY_MAIN="vuex-mutations-notify-main",IPC_EVENT_NOTIFY_RENDERERS="vuex-mutations-notify-renderers";function connect(a,b){a.send(IPC_EVENT_CONNECT,b)}function onConnect(a,b){a.on(IPC_EVENT_CONNECT,b)}function notifyMain(a,b){a.send(IPC_EVENT_NOTIFY_MAIN,b)}function onNotifyMain(a,b){a.on(IPC_EVENT_NOTIFY_MAIN,b)}function notifyRenderers(a,b,c){Object.keys(c).forEach(function(a){c[a].send(IPC_EVENT_NOTIFY_RENDERERS,b)})}function onNotifyRenderers(a,b){a.on(IPC_EVENT_NOTIFY_RENDERERS,b)}function rendererProcessLogic(a,b){connect(b.ipcRenderer),a.originalCommit=a.commit,a.originalDispatch=a.dispatch,a.commit=function(){throw new Error("[Vuex Electron] Please, don't use direct commit's, use dispatch instead of this.")},a.dispatch=function(a,c){notifyMain(b.ipcRenderer,{type:a,payload:c})},onNotifyRenderers(b.ipcRenderer,function(b,c){var d=c.type,e=c.payload;a.originalCommit(d,e)})}function mainProcessLogic(a,b){var c={};onConnect(b.ipcMain,function(a){var b=a.sender;c[b.id]=b,b.on("destroyed",function(){delete c[b.id]})}),onNotifyMain(b.ipcMain,function(b,c){var d=c.type,e=c.payload;a.dispatch(d,e)}),a.subscribe(function(a){var d=a.type,e=a.payload;notifyRenderers(b.ipcMain,{type:d,payload:e},c)})}var _default=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return function(b){var c="renderer"===process.type;a.ipcMain||(a.ipcMain=_electron.ipcMain),a.ipcRenderer||(a.ipcRenderer=_electron.ipcRenderer),c?rendererProcessLogic(b,a):mainProcessLogic(b,a)}};exports.default=_default,module.exports=exports["default"];